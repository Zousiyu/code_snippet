\chapter{MATLAB}

\section{如何遍历当前文件夹及其子文件夹中的全部文件}

假设现在我们有这样一个文件夹A，它含有一些文件和子文件夹B、C、D......我们需要将这个父文件夹（A）及其子文件夹（B、C、D......）中的所有文件名和其路径取出来。

如果你用的是MATLAB 2016b及其后面的版本，那真的太棒了！\Matlabinline|dir()|函数已经支持遍历搜索了。尝试敲入：

\begin{Matlabcode}
dir_data = dir('**/*');
dir_data([dir_data.isdir]) = [];  % 去除所有文件夹
\end{Matlabcode}

这将会返回一个包含文件信息的struct，现在你可以任意操作这些struct了，随意拼接路径。解放大脑，哦也！

方便归方便，但是，一来肯定有大多数人使用的是MATLAB 2016b之前的版本，二来，解放大脑意味着我失去了一次独立思考的机会。

\subsection*{思考}

对于实现方法\footnote{思路来源：\href{https://stackoverflow.com/questions/2652630/how-to-get-all-files-under-a-specific-directory-in-matlab}{How to get all files under a specific directory in MATLAB?}}，多层次的遍历，我们第一时间想到的肯定是递归。其次是数据的存储，\Matlabinline|dir()|函数返回的是一个struct，我们要充分利用这个数据结构。所以现在思路是，写一个递归函数，这个函数返回包含所以文件的struct。

这个函数应对先处理父文件夹，获取文件和文件夹，然后获取子文件夹，我们对获取的子文件夹再次调用该函数，最后函数返回存储有所有文件信息的struct。现在，你可以对这个结构体做你想做的事情。

\begin{algorithm}[H]
\KwIn{path}

\For{$ i = 1 $ \KwTo length (sub dir)}{
    get next dir information
    
    递归
}

\KwRet{struct of file information}
\caption{遍历获取当前文件夹及其所有子文件夹中的文件名}
\end{algorithm}

\subsection*{解}

在获取子文件夹的过程中，我们需要去除`.'和`..'这两个特殊的文件夹。

\Matlabfile[firstline=2]{code/get_all_file_name.m}

\subsection*{总结}
\Matlabinline|dir()|函数遍历整个F盘共2万余文件文件大约需要1.555823s。我们实现的递归函数遍历F盘文件大约需要3.703009s。慢是慢了点，但我们成功运用了递归解决问题，不是吗？

\section{title中英文标题}